{"version":3,"sources":["api/spaceX/launchesQuery.ts","pages/launches/Launches.tsx","hooks/launches/useInfiniteFetchLaunches.ts","App.tsx","index.tsx"],"names":["BASE_URL","optionsForQuery","page","options","limit","sort","date_unix","populate","path","_key","a","axios","post","data","useInfiniteQuery","launchesQuery","getFetchMore","lastPage","nextPage","status","error","isFetching","fetchMore","canFetchMore","infiniteRef","useInfiniteScroll","loading","hasNextPage","onLoadMore","message","className","data-testid","ref","map","query","docs","launch","name","id","App","style","maxWidth","Launches","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yOAGMA,EAAW,6BAGXC,EAAkB,SAACC,GACvB,MAAO,CACLC,QAAS,CACPD,OACAE,MAAO,GACPC,KAAM,CAAEC,UAAW,QACnBC,SAAU,CACRC,KAAM,QACND,SAAU,CACR,CACEC,KAAM,aASlB,yCAAe,WAAOC,GAAP,+BAAAC,EAAA,6DAAqBR,EAArB,+BAA4B,EAA5B,SACUS,IAAMC,KAAN,UAClBZ,EADkB,sBAErBC,EAAgBC,IAHL,uBACLW,EADK,EACLA,KADK,kBAKNA,GALM,2CAAf,sDCrBe,aAAO,IAAD,ECCZC,YAAyC,WAAYC,EAAe,CACzEC,aAAc,SAACC,GAAD,OAAcA,EAASC,YDArCC,EAFiB,EAEjBA,OACAN,EAHiB,EAGjBA,KACAO,EAJiB,EAIjBA,MACAC,EALiB,EAKjBA,WACAC,EANiB,EAMjBA,UACAC,EAPiB,EAOjBA,aAGIC,EAAcC,YAAoC,CACtDC,QAASL,EACTM,cAAeJ,EACfK,WAAYN,IAGd,MAAe,YAAXH,EAA6B,2CAC7BC,EAAc,2CAAcA,EAAMS,WAGpC,sBAAKC,UAAU,iBAAiBC,cAAY,gBAA5C,UACE,0CACA,mCACE,oBAAIC,IAAKR,EAAaO,cAAY,gBAAlC,SACGlB,GACCA,EAAKoB,KAAI,SAACC,GAAD,OACP,cAAC,WAAD,UACGA,EAAMC,KAAKF,KAAI,SAACG,GAAD,OACd,oBAA+BN,UAAU,MAAzC,SACGM,EAAOC,MADV,gBAAkBD,EAAOE,SAF7B,cAAsBJ,EAAMhC,kBEnB3BqC,EARC,WACd,OACE,qBAAKT,UAAU,wBAAwBU,MAAO,CAAEC,SAAU,QAA1D,SACE,cAACC,EAAD,OCDNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.acb0f212.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { Launch, Query } from \"./types\";\n\nconst BASE_URL = \"https://api.spacexdata.com\";\n\n/** The necessary query options, including sorting, pagination, and what child objects to include. */\nconst optionsForQuery = (page: number) => {\n  return {\n    options: {\n      page,\n      limit: 20,\n      sort: { date_unix: \"desc\" },\n      populate: {\n        path: \"cores\",\n        populate: [\n          {\n            path: \"core\",\n          },\n        ],\n      },\n    },\n  };\n};\n\n/** Retrieve a paginated list of launches. */\nexport default async (_key: string, page = 1) => {\n  const { data } = await axios.post<Query<Launch[]>>(\n    `${BASE_URL}/v4/launches/query`,\n    optionsForQuery(page)\n  );\n  return data;\n};\n","import React, { Fragment } from \"react\";\nimport useInfiniteScroll from \"react-infinite-scroll-hook\";\nimport useInfiniteFetchLaunches from \"../../hooks/launches/useInfiniteFetchLaunches\";\n\nexport default () => {\n  const {\n    status,\n    data,\n    error,\n    isFetching,\n    fetchMore,\n    canFetchMore,\n  } = useInfiniteFetchLaunches();\n\n  const infiniteRef = useInfiniteScroll<HTMLUListElement>({\n    loading: isFetching,\n    hasNextPage: !!canFetchMore,\n    onLoadMore: fetchMore,\n  });\n\n  if (status === \"loading\") return <p>Loading...</p>;\n  if (error) return <span>Error: {error.message}</span>;\n\n  return (\n    <div className=\"Launches prose\" data-testid=\"launches-page\">\n      <h1>Launches</h1>\n      <>\n        <ul ref={infiniteRef} data-testid=\"launches-list\">\n          {data &&\n            data.map((query) => (\n              <Fragment key={`page${query.page}`}>\n                {query.docs.map((launch) => (\n                  <li key={`launch${launch.id}`} className=\"h-8\">\n                    {launch.name}\n                  </li>\n                ))}\n              </Fragment>\n            ))}\n        </ul>\n      </>\n    </div>\n  );\n};\n","import { useInfiniteQuery } from \"react-query\";\nimport launchesQuery from \"../../api/spaceX/launchesQuery\";\nimport { Launch, Query } from \"../../api/spaceX/types\";\n\nexport default () => {\n  return useInfiniteQuery<Query<Launch[]>, Error>(\"launches\", launchesQuery, {\n    getFetchMore: (lastPage) => lastPage.nextPage,\n  });\n};\n","import React, { FC } from \"react\";\nimport Launches from \"./pages/launches/Launches\";\n\nconst App: FC = () => {\n  return (\n    <div className=\"App container mx-auto\" style={{ maxWidth: \"65ch\" }}>\n      <Launches />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}